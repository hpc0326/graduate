{"ast":null,"code":"import _regeneratorRuntime from \"/home/parallels/Desktop/gp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/home/parallels/Desktop/gp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _readOnlyError from \"/home/parallels/Desktop/gp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/readOnlyError\";\nimport _asyncToGenerator from \"/home/parallels/Desktop/gp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/parallels/Desktop/gp/src/Return_Map.js\";\nimport React, { useState, useEffect } from \"react\"; //import request from 'request';\n\nexport default function Map() {\n  return _Map.apply(this, arguments);\n}\n\nfunction _Map() {\n  _Map = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _useState, _useState2, error, setError, _useState3, _useState4, isLoaded, setIsLoaded, _useState5, _useState6, items, setItems, place, site, option, imageObjectURL, map;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _useState = useState(null), _useState2 = _slicedToArray(_useState, 2), error = _useState2[0], setError = _useState2[1];\n            _useState3 = useState(false), _useState4 = _slicedToArray(_useState3, 2), isLoaded = _useState4[0], setIsLoaded = _useState4[1];\n            _useState5 = useState([]), _useState6 = _slicedToArray(_useState5, 2), items = _useState6[0], setItems = _useState6[1];\n            place = {\n              lat: 25.012552936947003,\n              lng: 121.5405250609415\n            };\n            site = {\n              url: 'http://127.0.0.1:8000/map/?lat=' + place.lat + '&lng=' + place.lng\n            };\n            option = {\n              method: \"GET\",\n              headers: {\n                'Content-Type': 'image/jpg'\n              }\n            };\n            imageObjectURL = null;\n            _context.next = 9;\n            return useEffect(function () {\n              fetch(\"http://127.0.0.1:8000/map/?lat=25.013362460447322&lng=121.54140203728495\", option).then(function (res) {\n                return res.blob();\n              }).then(function (result) {\n                setIsLoaded(true);\n                setItems(result);\n                URL.createObjectURL(imageBlob), _readOnlyError(\"imageObjectURL\");\n              }, function (error) {\n                setIsLoaded(true);\n                setError(error);\n              });\n            }, []);\n\n          case 9:\n            map = {\n              width: '100%',\n              height: '100vh'\n            };\n\n            if (!error) {\n              _context.next = 14;\n              break;\n            }\n\n            return _context.abrupt(\"return\", /*#__PURE__*/React.createElement(\"div\", {\n              className: map,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 54,\n                columnNumber: 5\n              }\n            }, /*#__PURE__*/React.createElement(\"h3\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 7\n              }\n            }, \"error\"), /*#__PURE__*/React.createElement(\"img\", {\n              src: imageObjectURL,\n              alt: \" \",\n              width: map.width,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 56,\n                columnNumber: 7\n              }\n            })));\n\n          case 14:\n            if (isLoaded) {\n              _context.next = 18;\n              break;\n            }\n\n            return _context.abrupt(\"return\", /*#__PURE__*/React.createElement(\"div\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 12\n              }\n            }, \"Loading...\"));\n\n          case 18:\n            return _context.abrupt(\"return\", /*#__PURE__*/React.createElement(\"div\", {\n              className: map,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 7\n              }\n            }, /*#__PURE__*/React.createElement(\"h3\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 9\n              }\n            }, \"success\"), /*#__PURE__*/React.createElement(\"img\", {\n              src: site.url,\n              alt: \" \",\n              width: map.width,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 7\n              }\n            })));\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n  return _Map.apply(this, arguments);\n}","map":{"version":3,"names":["React","useState","useEffect","Map","error","setError","isLoaded","setIsLoaded","items","setItems","place","lat","lng","site","url","option","method","headers","imageObjectURL","fetch","then","res","blob","result","URL","createObjectURL","imageBlob","map","width","height"],"sources":["/home/parallels/Desktop/gp/src/Return_Map.js"],"sourcesContent":["import React , {useState , useEffect } from \"react\";\n//import request from 'request';\n\nexport default async function Map(){\n    const [error, setError] = useState(null);\n    const [isLoaded, setIsLoaded] = useState(false);\n    const [items, setItems] = useState([]);\n    \n    const place = {\n      lat:25.012552936947003, \n      lng :121.5405250609415\n    }\n\n    const site={\n      url : 'http://127.0.0.1:8000/map/?lat='+place.lat+'&lng='+place.lng\n    }\n\n    const option = {\n      method:  \"GET\",\n      headers: {\n      'Content-Type': 'image/jpg',\n      }\n    }\n    const imageObjectURL  = null\n  await useEffect(() => {\n    \n    fetch(\"http://127.0.0.1:8000/map/?lat=25.013362460447322&lng=121.54140203728495\" , option)\n      .then(res => res.blob())\n      .then(\n        (result) => {\n          setIsLoaded(true);\n          setItems(result);\n          imageObjectURL = URL.createObjectURL(imageBlob);\n        },\n        \n        (error) => {\n          setIsLoaded(true);\n          setError(error);\n        }\n      )\n  }, [])\n\n\n\nconst map = {\n  width :'100%',\n  height : '100vh'\n  \n}\n\n  if (error) {\n    return (\n\n    <div className ={map} >\n      <h3>error</h3>\n      <img src={imageObjectURL} alt= ' ' width={map.width}/>\n    </div>\n\n    )\n  } \n  else if (!isLoaded) {\n    return <div>Loading...</div>;\n  } \n  else {\n    return (\n      \n      <div className ={map} >\n        <h3>success</h3>\n      <img src={site.url} alt= ' ' width={map.width}/>\n    </div>\n      \n      \n    );\n  }\n\n\n\n}\n\n\n"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA2BC,SAA3B,QAA4C,OAA5C,C,CACA;;AAEA,wBAA8BC,GAA9B;EAAA;AAAA;;;kEAAe;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAA,YACeF,QAAQ,CAAC,IAAD,CADvB,6CACJG,KADI,kBACGC,QADH;YAAA,aAEqBJ,QAAQ,CAAC,KAAD,CAF7B,8CAEJK,QAFI,kBAEMC,WAFN;YAAA,aAGeN,QAAQ,CAAC,EAAD,CAHvB,8CAGJO,KAHI,kBAGGC,QAHH;YAKLC,KALK,GAKG;cACZC,GAAG,EAAC,kBADQ;cAEZC,GAAG,EAAE;YAFO,CALH;YAULC,IAVK,GAUA;cACTC,GAAG,EAAG,oCAAkCJ,KAAK,CAACC,GAAxC,GAA4C,OAA5C,GAAoDD,KAAK,CAACE;YADvD,CAVA;YAcLG,MAdK,GAcI;cACbC,MAAM,EAAG,KADI;cAEbC,OAAO,EAAE;gBACT,gBAAgB;cADP;YAFI,CAdJ;YAoBLC,cApBK,GAoBa,IApBb;YAAA;YAAA,OAqBPhB,SAAS,CAAC,YAAM;cAEpBiB,KAAK,CAAC,0EAAD,EAA8EJ,MAA9E,CAAL,CACGK,IADH,CACQ,UAAAC,GAAG;gBAAA,OAAIA,GAAG,CAACC,IAAJ,EAAJ;cAAA,CADX,EAEGF,IAFH,CAGI,UAACG,MAAD,EAAY;gBACVhB,WAAW,CAAC,IAAD,CAAX;gBACAE,QAAQ,CAACc,MAAD,CAAR;gBACiBC,GAAG,CAACC,eAAJ,CAAoBC,SAApB,CAAjB;cACD,CAPL,EASI,UAACtB,KAAD,EAAW;gBACTG,WAAW,CAAC,IAAD,CAAX;gBACAF,QAAQ,CAACD,KAAD,CAAR;cACD,CAZL;YAcD,CAhBc,EAgBZ,EAhBY,CArBF;;UAAA;YAyCTuB,GAzCS,GAyCH;cACVC,KAAK,EAAE,MADG;cAEVC,MAAM,EAAG;YAFC,CAzCG;;YAAA,KA+CTzB,KA/CS;cAAA;cAAA;YAAA;;YAAA,8CAkDX;cAAK,SAAS,EAAGuB,GAAjB;cAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;YAAA,gBACE;cAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;YAAA,WADF,eAEE;cAAK,GAAG,EAAET,cAAV;cAA0B,GAAG,EAAE,GAA/B;cAAmC,KAAK,EAAES,GAAG,CAACC,KAA9C;cAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;YAAA,EAFF,CAlDW;;UAAA;YAAA,IAyDHtB,QAzDG;cAAA;cAAA;YAAA;;YAAA,8CA0DJ;cAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;YAAA,gBA1DI;;UAAA;YAAA,8CA+DT;cAAK,SAAS,EAAGqB,GAAjB;cAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;YAAA,gBACE;cAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;YAAA,aADF,eAEA;cAAK,GAAG,EAAEd,IAAI,CAACC,GAAf;cAAoB,GAAG,EAAE,GAAzB;cAA6B,KAAK,EAAEa,GAAG,CAACC,KAAxC;cAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;YAAA,EAFA,CA/DS;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,C"},"metadata":{},"sourceType":"module"}